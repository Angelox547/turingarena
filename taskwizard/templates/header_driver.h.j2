{% import "macro.cpp.j2" as macro %}

#include <bits/stdc++.h>

// Driver entry points

{% for function in task.functions.values() %}
  {{ macro.function_prototype(function) }}
{% endfor %}

// Interface RPCs

{% for interface in task.interfaces.values() %}
  // RPC with interface {{interface.name}} 

  // Downward calls
  
  {% for function in interface.functions.values() -%}
    {{ macro.call_interface_function_prototype(function) }}
  {% endfor %}

  // Upward call
  
  {% for function in interface.callback_functions.values() -%}
    {{ macro.receive_interface_callback_prototype(function) }}
  {% endfor %}
{% endfor %}
